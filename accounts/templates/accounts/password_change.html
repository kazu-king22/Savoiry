{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'accounts/css/password_change.css' %}">
<link rel="stylesheet" href="{% static 'accounts/css/form_error.css' %}">

<div class="account-container">
  <h2 class="page-title">パスワード変更</h2>

  {% if messages %}
    {% for message in messages %}
      {% if message.tags == "error" %}
        <div class="error-banner">
          {{ message }}
        </div>
      {% endif %}
    {% endfor %}
  {% endif %}

  <form method="post" novalidate>
    {% csrf_token %}
    <div class="form-wrapper">

      <label>{{ form.old_password.label }}</label><br>
      {{ form.old_password }}
      {% if form.old_password.errors %}
        <p class="error-msg">{{ form.old_password.errors.0 }}</p>
      {% endif %}

      <label>{{ form.new_password1.label }}</label><br>
      {{ form.new_password1 }}
      {% if form.new_password1.errors %}
        <p class="error-msg">{{ form.new_password1.errors.0 }}</p>
      {% endif %}

      <label>{{ form.new_password2.label }}</label><br>
      {{ form.new_password2 }}
      {% if form.new_password2.errors %}
        <p class="error-msg">{{ form.new_password2.errors.0 }}</p>
      {% endif %}
    </div>

    <button type="submit" class="submit-btn">変更</button>
  </form>

  <p class="back-link">
    <a href="{% url 'accounts:mypage' %}">マイページに戻る</a>
  </p>
</div>
{% endblock %}
